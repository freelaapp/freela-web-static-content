import{r as s,l as q,n as B,j as e,H as D,C as I}from"./vendor-BE_QrNRA.js";import{C as O}from"./CustomReCAPTCHA-MtmSdi_m.js";import{u as M,a as z,b as G}from"./index-De_cGZWt.js";import{S as U}from"./SuccessFullScreen-DccCdGQx.js";import{P as V}from"./PasswordInput-DPGCDXXs.js";import"./successAnimation-C1ByJTMN.js";function X({...d}){const[b,m]=s.useState(!1),[r,f]=s.useState(""),[o,x]=s.useState(""),[i,n]=s.useState(!1),[h,a]=s.useState(!0),[C,p]=s.useState(""),l=s.useRef(null),[y,g]=s.useState(!1),A="6LfVPxMpAAAAAIs4S9b9Sa19r7ZkmEi6GxxoACBT",{authAdmin:c,authenticate:j,logout:v}=M(),{dispatch:w}=z(),S=q(),N=B(),P=new URLSearchParams(N.search).get("token"),L=t=>{t.preventDefault(),m(!0),a(!0),setTimeout(async()=>{const k={email:r,password:o},u=await j(d.requestOrigin,"Server","Admin",k,d.requestOrigin==="Chatbot"?P:void 0);u.success?(n(!0),p(u.message)):(w({type:"SHOW_ALERT",payload:{type:"error",text:u.message}}),F(),m(!1),a(!1))},3e3)},T=()=>{i&&setTimeout(async()=>{var t;(t=l.current)==null||t.resetReCAPTCHA(),c&&S("/admin/inicio"),n(!1)},4200)},H=()=>{var t;return!(!G.verifyEmail(r)||!E()||!((t=l.current)!=null&&t.reCAPTCHAFilled))},E=()=>o.length!==0,R=t=>{g(t)},F=()=>{var t;f(""),x(""),(t=l.current)==null||t.resetReCAPTCHA()};return s.useEffect(()=>{n(!1),a(!0),v()},[]),s.useEffect(()=>{a(!H())},[r,o,y]),s.useEffect(()=>{c&&T()},[c,i===!0]),e.jsx("div",{className:"flex justify-center w-full max-h-full min-h-screen tablet:items-center mobile:items-start",children:i?e.jsx(U,{text:C}):e.jsx("div",{className:"relative flex flex-col items-center tablet:justify-center mobile:justify-start mx-auto bg-gradient-to-b from-[#444] to-[#111] tablet:w-[26rem] mobile:w-full mobile:h-full tablet:min-h-full mobile:min-h-screen tablet:px-8 mobile:px-2 py-8 tablet:rounded-3xl mobile:rounded-none",children:e.jsxs("form",{className:"flex flex-col items-center w-full h-full",onSubmit:L,children:[e.jsx("a",{href:"https://www.freelaservicos.com.br/",className:"absolute flex items-center justify-center mt-4 transition-all duration-500 scale-100 top-3 tablet:left-7 mobile:left-2 hover:scale-110 text-tertiaryColor hover:text-primaryColor",children:e.jsx(D,{size:40})}),e.jsx("div",{className:"mb-8 text-3xl font-bold text-tertiaryColor",children:"LOGIN"}),e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Email"})}),e.jsx("input",{id:"email",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu email",onInput:t=>f(t.currentTarget.value.toLowerCase()),value:r}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Senha"})}),e.jsx(V,{value:o,setValue:x}),e.jsx(O,{ref:l,siteKey:A,theme:"dark",className:"mt-4",onReCAPTCHAFilledChange:R}),e.jsx("button",{type:"submit",className:"flex items-center justify-center mt-8 font-bold transition-all duration-300 ease-in-out scale-100 shadow-xl h-14 laptop:w-80 mobile:w-72 tablet:text-lg mobile:text-base shadow-quaternaryColor/50 bg-gradient-to-b text-tertiaryColor rounded-xl from-primaryColor to-quaternaryColor hover:scale-110 disabled:cursor-not-allowed disabled:scale-100 disabled:bg-gradient-to-b disabled:from-primaryColor/80 disabled:to-quaternaryColor/80",disabled:h,children:b?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(I,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Processando..."})]}):e.jsx("span",{children:"Entrar"})})]})})})}export{X as AdminLogin};
