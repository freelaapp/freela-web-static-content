import{l as B,r,j as e,H as w,C as A,L as N}from"./vendor-BE_QrNRA.js";import{C as I}from"./CustomReCAPTCHA-MtmSdi_m.js";import{u as U,a as $,A as S}from"./index-De_cGZWt.js";import{P as T}from"./PasswordInput-DPGCDXXs.js";import{P as G}from"./PasswordStatus-BZK7p8Rn.js";function X(){const{logout:O}=U(),{dispatch:a}=$(),q=B(),[h,i]=r.useState(!1),[y,l]=r.useState(!0),[s,m]=r.useState(""),[C,f]=r.useState(""),[g,v]=r.useState(""),[E,j]=r.useState(""),[P,L]=r.useState(!1),[c,R]=r.useState(!1),[d,H]=r.useState(!1),u=r.useRef(null),[x,V]=r.useState(!1),W="6LfVPxMpAAAAAIs4S9b9Sa19r7ZkmEi6GxxoACBT",k=t=>{t.preventDefault(),i(!0),l(!0),setTimeout(async()=>{if(b()){const o=await S.request({origin:"Web",method:"GET",url:"/users/generate-email-confirmation-code",params:{email:s,blockRegistered:!1}});o.success&&o.data?R(!0):a({type:"SHOW_ALERT",payload:{type:"error",text:"Houve um erro ao gerar o código de confirmação de email"}})}else a({type:"SHOW_ALERT",payload:{type:"error",text:"Os campos não estão corretos"}});i(!1),l(!1)},3e3)},F=t=>{t.preventDefault(),i(!0),l(!0),setTimeout(async()=>{if(b()){const o={code:C,email:s,date:new Date},n=await S.request({origin:"Web",method:"POST",url:"/users/confirm-email",data:o});if(n.success&&n.data)H(!0),a({type:"SHOW_ALERT",payload:{type:"success",text:"Código de confirmação de email verificado com sucesso"}});else{let p="";n.statusCode!==404?n.statusCode===401?p="Código de verificação incorreto":p="Houve um erro inesperado ao verificar o código de confirmação de email":p="Houve um erro ao verificar o código de confirmação de email",a({type:"SHOW_ALERT",payload:{type:"error",text:p}})}}else a({type:"SHOW_ALERT",payload:{type:"error",text:"Os campos não estão corretos"}});i(!1),l(!1)},3e3)},D=t=>{t.preventDefault(),i(!0),l(!0),setTimeout(async()=>{if(b()){const o={email:s,password:g},n=await S.request({origin:"Web",method:"PATCH",url:"/users/change-password",data:o});n.success&&n.data?(a({type:"SHOW_ALERT",payload:{type:"success",text:"Sua senha foi alterada com sucesso"}}),setTimeout(()=>{q("/login")},6e3)):a({type:"SHOW_ALERT",payload:{type:"error",text:"Houve um erro ao alterar sua senha"}})}else a({type:"SHOW_ALERT",payload:{type:"error",text:"Os campos não estão corretos"}});i(!1),l(!1)},3e3)},b=()=>c?d?!!(P&&x):!!(C.length>0&&x):!!(_()&&x),_=()=>{const t=s.substring(0,s.indexOf("@")),o=s.substring(s.indexOf("@")+1,s.length);return t.length>=1&&o.length>=3&&t.search("@")==-1&&o.search("@")==-1&&t.search(" ")==-1&&o.search(" ")==-1&&o.search(".")!=-1&&o.indexOf(".")>=1&&o.lastIndexOf(".")<o.length-1},z=t=>{V(t)};return r.useEffect(()=>{var t;c&&(m(""),(t=u.current)==null||t.resetReCAPTCHA())},[c]),r.useEffect(()=>{var t;d&&(f(""),(t=u.current)==null||t.resetReCAPTCHA())},[d]),r.useEffect(()=>{var t;!c&&!d&&(m(""),f(""),v(""),j(""),(t=u.current)==null||t.resetReCAPTCHA())},[c,d]),r.useEffect(()=>{l(!b())},[s,C,P,x]),r.useEffect(()=>{var t;O(),(t=u.current)==null||t.resetReCAPTCHA(),i(!1),l(!0),m(""),f(""),v(""),j(""),R(!1),H(!1)},[]),e.jsx("div",{className:"flex justify-center w-full max-h-full min-h-screen tablet:items-center mobile:items-start",children:c?d?e.jsx("div",{className:"relative flex flex-col items-center tablet:justify-center mobile:justify-start mx-auto bg-gradient-to-b from-[#444] to-[#111] tablet:w-[26rem] mobile:w-full mobile:h-full tablet:min-h-full mobile:min-h-screen tablet:px-8 mobile:px-2 py-8 tablet:rounded-3xl mobile:rounded-none",children:e.jsxs("form",{onSubmit:D,className:"flex flex-col items-center w-full h-full",children:[e.jsx("a",{href:"https://www.freelaservicos.com.br/",className:"absolute flex items-center justify-center mt-4 transition-all duration-500 scale-100 top-3 tablet:left-7 mobile:left-2 hover:scale-110 text-tertiaryColor hover:text-primaryColor",children:e.jsx(w,{size:40})}),e.jsx("div",{className:"mb-8 text-2xl font-bold text-tertiaryColor",children:"RECUPERAR SENHA"}),e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Nova senha"})}),e.jsx(T,{value:g,setValue:v},1),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Repetir nova senha"})}),e.jsx(T,{value:E,setValue:j},2),e.jsx(G,{password:g,repeatPassword:E,onPasswordValidChange:L}),e.jsx("button",{type:"submit",className:"flex items-center justify-center mt-8 font-bold transition-all duration-300 ease-in-out scale-100 shadow-xl h-14 laptop:w-80 mobile:w-72 tablet:text-lg mobile:text-base shadow-quaternaryColor/50 bg-gradient-to-b text-tertiaryColor rounded-xl from-primaryColor to-quaternaryColor hover:scale-110 disabled:cursor-not-allowed disabled:scale-100 disabled:bg-gradient-to-b disabled:from-primaryColor/80 disabled:to-quaternaryColor/80",disabled:y,children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(A,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Salvando..."})]}):e.jsx("span",{children:"Salvar"})}),e.jsxs("button",{type:"button",className:"relative mt-8 transition-colors duration-300 group text-tertiaryColor hover:text-primaryColor",children:[e.jsx(N,{to:"/login",children:"Voltar"}),e.jsx("span",{className:"absolute left-0 w-full h-[0.20rem] transition-transform duration-300 transform scale-x-0 rounded-full -bottom-1 bg-tertiaryColor group-hover:bg-primaryColor group-hover:scale-x-100"})]})]},"changePasswordForm")}):e.jsx("div",{className:"relative flex flex-col items-center tablet:justify-center mobile:justify-start mx-auto bg-gradient-to-b from-[#444] to-[#111] tablet:w-[26rem] mobile:w-full mobile:h-full tablet:min-h-full mobile:min-h-screen tablet:px-8 mobile:px-2 py-8 tablet:rounded-3xl mobile:rounded-none",children:e.jsxs("form",{className:"flex flex-col items-center w-full h-full",onSubmit:F,children:[e.jsx("a",{href:"https://www.freelaservicos.com.br/",className:"absolute flex items-center justify-center mt-4 transition-all duration-500 scale-100 top-3 tablet:left-7 mobile:left-2 hover:scale-110 text-tertiaryColor hover:text-primaryColor",children:e.jsx(w,{size:40})}),e.jsx("div",{className:"mb-8 text-2xl font-bold text-tertiaryColor",children:"RECUPERAR SENHA"}),e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Código de verificação"})}),e.jsx("input",{id:"verifyCode",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite o código de verificação",onInput:t=>f(t.currentTarget.value)}),e.jsx("button",{type:"submit",className:"flex items-center justify-center mt-8 font-bold transition-all duration-300 ease-in-out scale-100 shadow-xl h-14 laptop:w-80 mobile:w-72 tablet:text-lg mobile:text-base shadow-quaternaryColor/50 bg-gradient-to-b text-tertiaryColor rounded-xl from-primaryColor to-quaternaryColor hover:scale-110 disabled:cursor-not-allowed disabled:scale-100 disabled:bg-gradient-to-b disabled:from-primaryColor/80 disabled:to-quaternaryColor/80",disabled:y,children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(A,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Confirmando..."})]}):e.jsx("span",{children:"Confirmar"})}),e.jsxs("button",{type:"button",className:"relative mt-8 transition-colors duration-300 group text-tertiaryColor hover:text-primaryColor",children:[e.jsx(N,{to:"/login",children:"Voltar"}),e.jsx("span",{className:"absolute left-0 w-full h-[0.20rem] transition-transform duration-300 transform scale-x-0 rounded-full -bottom-1 bg-tertiaryColor group-hover:bg-primaryColor group-hover:scale-x-100"})]})]},"verifyCodeForm")}):e.jsx("div",{className:"relative flex flex-col items-center tablet:justify-center mobile:justify-start mx-auto bg-gradient-to-b from-[#444] to-[#111] tablet:w-[26rem] mobile:w-full mobile:h-full tablet:min-h-full mobile:min-h-screen tablet:px-8 mobile:px-2 py-8 tablet:rounded-3xl mobile:rounded-none",children:e.jsxs("form",{className:"flex flex-col items-center w-full h-full",onSubmit:k,children:[e.jsx("a",{href:"https://www.freelaservicos.com.br/",className:"absolute flex items-center justify-center mt-4 transition-all duration-500 scale-100 top-3 tablet:left-7 mobile:left-2 hover:scale-110 text-tertiaryColor hover:text-primaryColor",children:e.jsx(w,{size:40})}),e.jsx("div",{className:"mb-8 text-2xl font-bold text-tertiaryColor",children:"RECUPERAR SENHA"}),e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Email"})}),e.jsx("input",{id:"email",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu email",onInput:t=>m(t.currentTarget.value.toLowerCase())}),e.jsx(I,{ref:u,siteKey:W,theme:"dark",className:"mt-4",onReCAPTCHAFilledChange:z}),e.jsx("button",{type:"submit",className:"flex items-center justify-center mt-8 font-bold transition-all duration-300 ease-in-out scale-100 shadow-xl h-14 laptop:w-80 mobile:w-72 tablet:text-lg mobile:text-base shadow-quaternaryColor/50 bg-gradient-to-b text-tertiaryColor rounded-xl from-primaryColor to-quaternaryColor hover:scale-110 disabled:cursor-not-allowed disabled:scale-100 disabled:bg-gradient-to-b disabled:from-primaryColor/80 disabled:to-quaternaryColor/80",disabled:y,children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(A,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Enviando..."})]}):e.jsx("span",{children:"Enviar"})}),e.jsxs("button",{type:"button",className:"relative mt-8 transition-colors duration-300 group text-tertiaryColor hover:text-primaryColor",children:[e.jsx(N,{to:"/login",children:"Voltar"}),e.jsx("span",{className:"absolute left-0 w-full h-[0.20rem] transition-transform duration-300 transform scale-x-0 rounded-full -bottom-1 bg-tertiaryColor group-hover:bg-primaryColor group-hover:scale-x-100"})]})]},"emailForm")})})}export{X as ForgetPassword};
