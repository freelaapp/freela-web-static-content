import{l as $e,r as t,j as e,a1 as Je,a2 as qe,p as E}from"./vendor-BE_QrNRA.js";import{u as Ge,a as _e,A as Qe}from"./index-De_cGZWt.js";import{G as Ke}from"./geolocationService-Cv-h-3ra.js";import{S as me,a as fe,C as pe}from"./Select-BI-zKZt_.js";import{L as Xe}from"./Loading-CinVEkVQ.js";import{S as Ye}from"./SuccessFullScreen-DccCdGQx.js";import{U as Ze}from"./UploadImage-6W-4zlPT.js";import{S as xe,a as er}from"./Slider-BnFedS97.js";import{C as rr}from"./Checkbox-SqpJbIZe.js";import{S as tr}from"./SupportButton-C9Cgi7QZ.js";import"./successAnimation-C1ByJTMN.js";import"./index-BNajdFMh.js";import"./images-DlAOhzUc.js";function Cr(){const{authToken:V,authUser:d,chatBotToken:M,setContractorProfile:Ce}=Ge(),{dispatch:I}=_e(),P=$e(),[b,be]=t.useState(""),[y,ye]=t.useState(""),[w,F]=t.useState(""),[h,he]=t.useState(""),[g,ge]=t.useState(""),[v,U]=t.useState(""),[j,W]=t.useState(""),[D,B]=t.useState(""),[N,$]=t.useState(""),[A,J]=t.useState(""),[m,q]=t.useState(""),[f,G]=t.useState(""),[_,Q]=t.useState(""),[K,X]=t.useState(""),[Y,Z]=t.useState(""),[ee,re]=t.useState(""),[S,O]=t.useState(""),[p,ve]=t.useState(1),[x,je]=t.useState(1),[R,Ne]=t.useState(!1),[c,we]=t.useState(null),[L,Se]=t.useState(!1),[l,k]=t.useState(1),[te,oe]=t.useState(!1),[ae,se]=t.useState(!1),[z,u]=t.useState(!1),[o,C]=t.useState(!1),[ke,le]=t.useState(!1),[Te,ie]=t.useState(!1),ne=t.useRef(null),de=t.useRef(l),Pe=async()=>{l===4?await Ie():k(l+1)},Ee=()=>{l===1?P("/perfil"):k(l-1)},Ie=async()=>{if(C(!0),V&&d){let r={cnpj:b,corporateReason:y,companySegment:w,phoneNumber:d.phoneNumber,landline:"(00) 0000-0000",nameOperationResponsible:h,phoneOperationResponsible:g,cep:v,street:j,complement:D,neighborhood:N,number:A,city:m,uf:f,ibge:_,gia:K,ddd:Y,siafi:ee,vacancies:S,numberFixedEmployees:p,numberWeeklyHires:x,providerSpeakAnotherLanguage:R,profileImage:c,feedbackStars:0,createdAt:new Date,userId:d==null?void 0:d.id};M&&(r={chatBotToken:M,...r});const s=new FormData;for(const[i,n]of Object.entries(r))if(n!==null)if(i==="profileImage"&&c){const T=await c.arrayBuffer(),We=new Blob([T],{type:c.type});s.append(i,We,c.name)}else s.append(i,n.toString());const a=await Qe.request({origin:"Web",method:"POST",url:"/contractors",data:s,headers:{"Content-Type":"multipart/form-data"},authToken:V});if(a.success&&a.data)C(!1),le(!0),setTimeout(()=>{Ce(!0),P("/contratante/inicio"),le(!1)},4200);else{ie(!0);let i="";a.statusCode!==404?a.statusCode===409?(i="O CNPJ já está associado à um cadastro",k(1)):a.statusCode===422?(i="O cartão de crédito não é válido",k(5)):i="Houve um erro inesperado ao criar o perfil contratante":i="Houve um erro ao criar o perfil contratante",I({type:"SHOW_ALERT",payload:{type:"error",text:i}}),C(!1)}}},De="files/useTerms.pdf",Be=async()=>{var r;try{const a=await(await fetch(De)).blob(),i=window.URL.createObjectURL(new Blob([a])),n=document.createElement("a");n.href=i,n.setAttribute("download","useTerms.pdf"),document.body.appendChild(n),n.click(),(r=n.parentNode)==null||r.removeChild(n)}catch(s){console.error("Error downloading termos of use pdf: ",s),I({type:"SHOW_ALERT",payload:{type:"error",text:"Houve um erro ao baixar os termos de uso"}})}},[Ae,ce]=t.useState("(00) 0000-00000"),Oe=r=>{ge(r.target.value),r.target.value&&(r.target.value.replace(/\D/g,"").length===11?ce("(00) 00000-0000"):ce("(00) 0000-00000"))},[Re,ue]=t.useState(),[Le,H]=t.useState([]),ze=(r,s)=>{s&&(s.action==="clear"?(ue(void 0),F("")):r&&"value"in r&&(ue(r),F(r.value)))},He=(r,s)=>{if(s)if(s.action==="clear")H([]),O("");else{const a=Array.isArray(r)?r:[];if(a.length>0){H(a);const n=a.map(T=>T==null?void 0:T.value).join(", ");O(n)}else H([]),O("")}},Ve=async r=>{if(U(r.target.value),r.target.value&&r.target.value.length===9){C(!0);const s=r.target.value.replace(/-/g,""),a=await Ke.getAddressByCep(s);a?(q(a.city),G(a.uf),$(a.neighborhood),W(a.street),B(a.complement),Q(a.ibge),X(a.gia),Z(a.ddd),re(a.siafi)):(U(""),q(""),G(""),$(""),W(""),B(""),Q(""),X(""),Z(""),re(""),J(""),I({type:"SHOW_ALERT",payload:{type:"error",text:"CEP não encontrado"}})),setTimeout(()=>{C(!1)},3e3)}},Me=async r=>{be(r.target.value),r.target.value&&r.target.value.length===18&&(C(!0),setTimeout(()=>{C(!1)},3e3))},Fe=()=>{switch(l){case 1:return e.jsxs("div",{className:"flex flex-col text-tertiaryColor",children:[e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"CNPJ*"})}),e.jsx(E,{mask:"00.000.000/0000-00",type:"text",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu CNPJ",onInput:Me,value:b,disabled:o}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Razão Social*"})}),e.jsx("input",{id:"corporateReason",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite a razão social da empresa",onInput:r=>ye(r.currentTarget.value),value:y,disabled:o}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Segmento da Empresa*"})}),e.jsx(me,{placeholder:"Selecione",isSearchable:!1,name:"companySegment",options:pe.getCompanySegmentCombo(),styles:fe.getCustomStyles(),noOptionsMessage:()=>"Nenhum resultado encontrado",onChange:ze,value:Re,isDisabled:o},1),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor/50 text-start",children:"Número de Telefone*"})}),e.jsx(E,{mask:"(00) 00000-0000",type:"text",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm text-tertiaryColor/50 bg-secondaryColor border-tertiaryColor/50 placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu número de telefone",value:d==null?void 0:d.phoneNumber,disabled:!0}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Nome do responsável da operação"})}),e.jsx("input",{id:"nameOperationResponsible",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite o nome do responsável da operação",onInput:r=>he(r.currentTarget.value),value:h,disabled:o}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Telefone do responsável da operação*"})}),e.jsx(E,{mask:Ae,type:"text",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite o telefone do responsável da operação",onInput:Oe,value:g,disabled:o})]});case 2:return e.jsxs("div",{className:"flex flex-col text-tertiaryColor",children:[e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"font-bold text-primaryColor text-start",children:"Digite as informações da sua empresa!"})}),e.jsx("div",{className:"flex justify-start w-full mt-2 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"CEP*"})}),e.jsx(E,{mask:"00000-000",type:"text",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",placeholder:"Digite seu CEP",onInput:Ve,value:v,disabled:o}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor/50 text-start",children:"Cidade*"})}),e.jsx("input",{id:"city",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor disabled:border-tertiaryColor/50 disabled:text-tertiaryColor/50",value:m&&f?m+" - "+f:"",disabled:!0}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor/50 text-start",children:"Bairro*"})}),e.jsx("input",{id:"neighborhood",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor disabled:border-tertiaryColor/50 disabled:text-tertiaryColor/50",value:N,disabled:!0}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor/50 text-start",children:"Endereço*"})}),e.jsx("input",{id:"street",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor disabled:border-tertiaryColor/50 disabled:text-tertiaryColor/50",value:j,disabled:!0}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Complemento"})}),e.jsx("input",{id:"complement",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor disabled:border-tertiaryColor/50 disabled:text-tertiaryColor/50",value:D,onInput:r=>B(r.currentTarget.value),disabled:o}),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Número"})}),e.jsx("input",{id:"number",placeholder:"Digite o número da sua empresa/negócio",className:"block w-full h-12 px-3 py-2 bg-opacity-0 border rounded-md shadow-sm resize-none text-tertiaryColor bg-secondaryColor border-tertiaryColor placeholder-tertiaryColor/50 focus:outline-none focus:border-primaryColor focus:ring-primaryColor focus:ring-1 invalid:border-errorColor invalid:text-errorColor focus:invalid:border-errorColor focus:invalid:ring-errorColor",value:A,onInput:r=>J(r.currentTarget.value),disabled:o})]});case 3:return e.jsxs("div",{className:"flex flex-col text-tertiaryColor",children:[e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Quais vagas deseja contratar?"})}),e.jsx(me,{isMulti:!0,placeholder:"Selecione",isSearchable:!1,name:"vacancy",options:pe.getVacancyCombo(),styles:fe.getCustomStyles(),noOptionsMessage:()=>"Nenhum resultado encontrado",value:Le,onChange:He,closeMenuOnSelect:!1,isDisabled:o},2),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Número de funcionários fixos*"})}),e.jsx(xe,{value:p,setValue:ve,disabled:o},3),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Número de contratações semanais*"})}),e.jsx(xe,{value:x,setValue:je,disabled:o},4),e.jsx("div",{className:"flex justify-start w-full mt-4 mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Freelancer falará outro idioma?*"})}),e.jsx(er,{checked:R,onChange:r=>{Ne(r.target.checked)},disabled:o})]});case 4:return e.jsxs("div",{className:"flex flex-col text-tertiaryColor",children:[e.jsx("div",{className:"flex justify-start w-full mb-1",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Imagem de perfil"})}),e.jsx(Ze,{value:c,setValue:r=>{r&&we(r)},disabled:o}),e.jsx("span",{className:"mt-10 text-base text-primaryColor",children:"Para continuar você deve aceitar os termos de uso do App:"}),e.jsxs("div",{className:"flex flex-row items-start justify-start w-full mt-2",children:[e.jsx(rr,{checked:L,onChange:Se,disabled:o}),e.jsxs("button",{type:"button",onClick:Be,className:"mt-3 ml-2 text-sm text-left text-tertiaryColor",disabled:o,children:[e.jsx("span",{children:"Declaro que concordo e aceito os "}),e.jsx("span",{className:"underline transition-colors duration-300 hover:text-primaryColor",children:"Termos de Uso e Políticas de Privacidade"})]})]})]});default:return null}},Ue=()=>{switch(l){case 1:return"Informações cadastrais";case 2:return"Informações de localidade";case 3:return"Informações profissionais";case 4:return"Identificação visual";default:return null}};return t.useEffect(()=>{de.current=l,window.history.pushState({page:l},""),requestAnimationFrame(()=>{var r;(r=ne.current)==null||r.scrollTo({top:0,behavior:"smooth"})})},[l]),t.useEffect(()=>{const r=()=>{de.current>1?k(s=>s-1):P("/perfil")};return window.addEventListener("popstate",r),()=>{window.removeEventListener("popstate",r)}},[P]),t.useEffect(()=>{switch(l){case 1:!o&&(b==null?void 0:b.length)===18&&(y==null?void 0:y.length)>0&&(w==null?void 0:w.length)>0&&(h==null?void 0:h.length)>0&&(g==null?void 0:g.length)>=14?u(!1):u(!0);break;case 2:!o&&(v==null?void 0:v.length)===9&&(m==null?void 0:m.length)>0&&(f==null?void 0:f.length)>0&&(N==null?void 0:N.length)>0&&(j==null?void 0:j.length)>0?u(!1):u(!0);break;case 3:!o&&(S==null?void 0:S.length)>0&&p&&(p==null?void 0:p.toString().length)>0&&x&&(x==null?void 0:x.toString().length)>0?u(!1):u(!0);break;case 4:u(!(!o&&c&&L));break;default:throw new Error("Current page value was not predicted")}},[l,o,b,y,w,h,g,v,j,D,N,A,m,f,_,K,Y,ee,S,p,x,R,c,L]),e.jsx(e.Fragment,{children:ke?e.jsx(Ye,{text:"Cadastro concluído com sucesso"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center w-full h-full overflow-x-hidden bg-secondaryColor",children:e.jsxs("form",{ref:ne,className:"relative flex flex-col items-center justify-start mx-auto bg-gradient-to-b w-[26rem] h-screen tablet:px-8 mobile:px-2 py-8 rounded-3xl",children:[e.jsx("div",{className:"fixed top-0 z-10 flex flex-col w-full px-10 py-4 bg-primaryColor",children:e.jsx("span",{className:"text-lg font-bold text-center text-tertiaryColor",children:Ue()})}),e.jsx("div",{className:"relative flex flex-col w-full h-auto px-10 pt-20 pb-32",children:Fe()}),e.jsxs("div",{className:"fixed bottom-0 z-10 flex items-center justify-between w-full py-3 desktop:px-96 laptop:px-28 tablet:px-20 mobile:px-3 bg-primaryColor",children:[e.jsxs("button",{type:"button",className:"flex flex-col items-center w-16",onMouseEnter:()=>oe(!0),onMouseLeave:()=>oe(!1),onClick:Ee,disabled:o,children:[e.jsx(Je,{size:42,className:`transition-transform duration-500 ${te?"scale-110 text-secondaryColor":"scale-100 text-tertiaryColor"}`}),e.jsx("span",{className:`mt-3 transition-transform duration-1000 ${te?"text-secondaryColor":"text-tertiaryColor"}`,children:"Voltar"})]}),e.jsxs("button",{type:"button",className:"flex flex-col items-center",onMouseEnter:()=>se(!0),onMouseLeave:()=>se(!1),onClick:Pe,disabled:z||o,children:[e.jsx(qe,{size:42,className:`transition-transform duration-500 
                                            ${z?"scale-110 text-tertiaryColor/50":`${ae?"scale-110 text-secondaryColor":"scale-100 text-tertiaryColor"}`}
                                        `}),e.jsx("span",{className:`mt-3 transition-transform duration-1000
                                            ${z?"text-tertiaryColor/50":`${ae?"text-secondaryColor":"text-tertiaryColor"}`}
                                        `,children:l===4?"Finalizar":"Próximo"})]})]})]})}),e.jsx(tr,{textTooltip:"Você está tendo problemas ao se cadastrar?",tooltipIsVisible:Te,setTooltipIsVisible:ie}),o&&e.jsx(Xe,{})]})})}export{Cr as ContractorNew};
