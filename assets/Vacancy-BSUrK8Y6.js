var Ke=Object.defineProperty;var Ze=(a,t,u)=>t in a?Ke(a,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[t]=u;var Te=(a,t,u)=>Ze(a,typeof t!="symbol"?t+"":t,u);import{r as o,j as e,D as fe,d as me,at as xe,au as pe,e as je,a4 as ye,y as Ce,C as X,aG as Xe,aH as Ye,aI as ea,aJ as aa,aK as ta,aL as sa,aM as ra,aN as oa,aO as ia,aP as na,aQ as la,aR as ca,E as da,T as ke,F as Ie,J as ua,K as fa,M as ma,P as Pe,az as xa,aA as Le,Q as pa,V as ya,X as ha,Y as ba,a1 as ga,a2 as ja,as as Ca,aS as va,aT as wa,a3 as Na,a6 as Sa}from"./vendor-BE_QrNRA.js";import{D as ae,M as be}from"./monetaryUtil-PAfO6RE4.js";import{u as de,A as v,a as ve}from"./index-De_cGZWt.js";import{u as Re}from"./useConfirmation-YuXM9JRY.js";import{S as Be}from"./images-DlAOhzUc.js";import{L as Ta}from"./Loading-CinVEkVQ.js";import{s as ka}from"./successAnimation-C1ByJTMN.js";function Ia({...a}){const{authToken:t}=de(),u=o.useRef(!1),[d,w]=o.useState(null),[x,S]=o.useState(null),[H,F]=o.useState([]),[h,B]=o.useState(!0),W=async c=>{if(t){const i=await v.request({origin:"Web",method:"GET",url:`/providers/${c}`,authToken:t});if(i.success&&i.data)return i.data}return null},J=async c=>{if(t){const i=await v.request({origin:"Web",method:"GET",url:`/users/${c}`,authToken:t});if(i.success&&i.data)return i.data}return null},b=async c=>{if(t){const i=await v.request({origin:"Web",method:"GET",url:`/vacancies/${c}`,authToken:t});if(i.success&&i.data)return i.data}return null},R=async c=>{if(t){const i=await v.request({origin:"Web",method:"GET",url:`/jobs/${c}`,authToken:t});if(i.success&&i.data)return i.data}return null},g=c=>e.jsx("img",{src:c,alt:"Imagem de perfil do Freelancer que se candidatou",className:"rounded-full w-14 h-14"}),T=()=>e.jsx("div",{className:"flex w-full h-full mt-1",children:h?e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx(X,{weight:"bold",className:"w-14 h-14 animate-spin text-tertiaryColor"})}):H.length===0?e.jsx("div",{className:"flex items-center justify-center w-full h-full mt-10 text-center text-tertiaryColor",children:"Nenhum feedback encontrado"}):e.jsx("div",{className:"flex flex-col items-start justify-start w-full h-full",children:H.map(c=>e.jsxs("div",{className:"flex flex-col items-start justify-start w-full p-2 mt-3 border-2 rounded-lg min-h-10 border-primaryColor",children:[e.jsxs("div",{className:"flex flex-row items-start justify-start",children:[e.jsx("div",{className:"flex items-center justify-center w-full h-full font-bold",children:g(c.provider.image)}),e.jsxs("div",{className:"flex flex-col ml-2",children:[e.jsx("div",{className:"text-tertiaryColor",children:c.provider.name}),e.jsxs("div",{className:"flex flex-row items-center mt-1",children:[e.jsx(ye,{readOnly:!0,value:c.star,size:"small",emptyIcon:e.jsx(Ce,{className:"text-quinaryColor",size:18})}),e.jsx("div",{className:"ml-4 text-sm text-tertiaryColor",children:ae.formatDateToBR(c.createdAt)})]})]})]}),e.jsx("div",{className:"flex items-center w-full mt-2 text-sm",children:e.jsx("div",{className:"block w-full px-2 py-1 bg-opacity-0 rounded-md shadow-sm text-tertiaryColor bg-secondaryColor",children:c.comment})})]},c.id))})}),P=async()=>{if(u.current=!0,t){const c=await v.request({origin:"Web",method:"GET",url:`/contractors/${a.contractorId}`,authToken:t});if(c.success&&c.data){const i=c.data;w(i);const y=await J(i.userId);if(y){S(y);const E=await v.request({origin:"Web",method:"GET",url:`/contractors/${i.id}/jobs/feedbacks`,authToken:t});if(E.success&&E.data){const O=E.data;if(O.length>0){const U=new Uint8Array(i.profileImage.data).buffer,V=new Blob([U],{type:"image/jpeg"}),D=URL.createObjectURL(V),I=[];for(const j of O){const M=await R(j.jobId);if(M){const $=await b(M.vacancyId);if($){const z=await W(j.sender);if(z){const _=new Uint8Array(z.profileImage.data).buffer,Q=new Blob([_],{type:"image/jpeg"}),K=URL.createObjectURL(Q),G=await J(z.userId);G&&I.push({id:j.id,job:{id:M.id,title:$.assignment,establishment:$.establishment},contractor:{id:i.id,image:D,name:y.name},provider:{id:z.id,image:K,name:G.name},comment:j.comment,star:j.star,createdAt:j.createdAt})}}}}F(I),B(!1)}else F([]),B(!1)}}else S(null)}else w(null)}u.current=!1},L=()=>{w(null),S(null),F([]),B(!0)};return o.useEffect(()=>{L(),a.open&&(u.current||P())},[a.open]),e.jsx(e.Fragment,{children:d&&x&&e.jsxs(fe,{onClose:a.onClose,open:a.open,maxWidth:"xl",children:[e.jsx(me,{className:"w-full text-xl font-bold text-center text-tertiaryColor bg-gradient-to-b from-primaryColor to-quaternaryColor",children:`Perfil de ${x.name.split(" ")[0]}`}),e.jsx(xe,{edge:"end",onClick:a.onClose,"aria-label":"close",sx:{position:"absolute",top:"12px",right:"20px"},children:e.jsx(pe,{})}),e.jsx(je,{className:"bg-[#222]",children:e.jsxs("div",{className:"flex flex-col items-center tablet:w-[22rem] mobile:w-[16rem] h-96",children:[e.jsx("span",{className:"text-xl text-center text-tertiaryColor",children:"Histórico de feedback's"}),e.jsx("div",{className:"flex w-full h-full",children:T()})]})})]})})}function Pa({...a}){const t=()=>{let u=a.assignment;switch(u.includes("Músico")&&(u="Músico"),u){case"Auxiliar cozinha":return e.jsx(ca,{size:30,weight:"regular"});case"Auxiliar limpeza":return e.jsx(la,{size:28,weight:"regular"});case"Barista":return e.jsx(na,{size:28,weight:"regular"});case"Barman/Bartender":return e.jsx(ia,{size:28,weight:"regular"});case"Camareira":return e.jsx(oa,{size:28,weight:"regular"});case"Chapeiro(a)":return e.jsx(ra,{size:28,weight:"regular"});case"Cozinheira(o)":return e.jsx(sa,{size:28,weight:"regular"});case"Cumim":return e.jsx(ta,{size:28,weight:"regular"});case"Garçom":return e.jsx(aa,{size:28,weight:"regular"});case"Hostess/Recepcionista":return e.jsx(ea,{size:28,weight:"regular"});case"Músico":return e.jsx(Ye,{size:28,weight:"regular"});case"Segurança (Não armado)":return e.jsx(Xe,{size:28,weight:"regular"});default:return console.log("Unknown job assignment"),e.jsx(e.Fragment,{})}};return e.jsx("div",{className:"relative text-primaryColor",children:t()})}function La({...a}){const{authToken:t}=de(),u=o.useRef(!1),[d,w]=o.useState(null),[x,S]=o.useState(null),[H,F]=o.useState([]),[h,B]=o.useState(!0),W=async c=>{if(t){const i=await v.request({origin:"Web",method:"GET",url:`/contractors/${c}`,authToken:t});if(i.success&&i.data)return i.data}return null},J=async c=>{if(t){const i=await v.request({origin:"Web",method:"GET",url:`/users/${c}`,authToken:t});if(i.success&&i.data)return i.data}return null},b=async c=>{if(t){const i=await v.request({origin:"Web",method:"GET",url:`/vacancies/${c}`,authToken:t});if(i.success&&i.data)return i.data}return null},R=async c=>{if(t){const i=await v.request({origin:"Web",method:"GET",url:`/jobs/${c}`,authToken:t});if(i.success&&i.data)return i.data}return null},g=c=>e.jsx("img",{src:c,alt:"Imagem de perfil do Freelancer que se candidatou",className:"rounded-full w-14 h-14"}),T=()=>e.jsx("div",{className:"flex w-full h-full mt-1",children:h?e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx(X,{weight:"bold",className:"w-14 h-14 animate-spin text-tertiaryColor"})}):H.length===0?e.jsx("div",{className:"flex items-center justify-center w-full h-full mt-10 text-center text-tertiaryColor",children:"Nenhum feedback encontrado"}):e.jsx("div",{className:"flex flex-col items-start justify-start w-full h-full",children:H.map(c=>e.jsxs("div",{className:"flex flex-col items-start justify-start w-full p-2 mt-3 border-2 rounded-lg min-h-10 border-primaryColor",children:[e.jsxs("div",{className:"flex flex-row items-start justify-start",children:[e.jsx("div",{className:"flex items-center justify-center w-full h-full font-bold",children:g(c.contractor.image)}),e.jsxs("div",{className:"flex flex-col ml-2",children:[e.jsx("div",{className:"text-tertiaryColor",children:c.job.establishment}),e.jsxs("div",{className:"flex flex-row items-center mt-1",children:[e.jsx(ye,{readOnly:!0,value:c.star,size:"small",emptyIcon:e.jsx(Ce,{className:"text-quinaryColor",size:18})}),e.jsx("div",{className:"ml-4 text-sm text-tertiaryColor",children:ae.formatDateToBR(c.createdAt)})]})]})]}),e.jsx("div",{className:"flex items-center w-full mt-2 text-sm",children:e.jsx("div",{className:"block w-full px-2 py-1 bg-opacity-0 rounded-md shadow-sm text-tertiaryColor bg-secondaryColor",children:c.comment})})]},c.id))})}),P=async()=>{if(u.current=!0,t){const c=await v.request({origin:"Web",method:"GET",url:`/providers/${a.providerId}`,authToken:t});if(c.success&&c.data){const i=c.data;w(i);const y=await J(i.userId);if(y){S(y);const E=await v.request({origin:"Web",method:"GET",url:`/providers/${i.id}/jobs/feedbacks`,authToken:t});if(E.success&&E.data){const O=E.data;if(O.length>0){const U=new Uint8Array(i.profileImage.data).buffer,V=new Blob([U],{type:"image/jpeg"}),D=URL.createObjectURL(V),I=[];for(const j of O){const M=await R(j.jobId);if(M){const $=await b(M.vacancyId);if($){const z=await W(j.sender);if(z){const _=new Uint8Array(z.profileImage.data).buffer,Q=new Blob([_],{type:"image/jpeg"}),K=URL.createObjectURL(Q),G=await J(z.userId);G&&I.push({id:j.id,job:{id:M.id,title:$.assignment,establishment:$.establishment},contractor:{id:z.id,image:K,name:G.name},provider:{id:i.id,image:D,name:y.name},providerAttendedJob:j.providerAttendedJob,comment:j.comment,star:j.star,createdAt:j.createdAt})}}}}F(I),B(!1)}else F([]),B(!1)}}else S(null)}else w(null)}u.current=!1},L=()=>{w(null),S(null),F([]),B(!0)};return o.useEffect(()=>{L(),a.open&&(u.current||P())},[a.open]),e.jsx(e.Fragment,{children:d&&x&&e.jsxs(fe,{onClose:a.onClose,open:a.open,maxWidth:"xl",children:[e.jsx(me,{className:"w-full text-xl font-bold text-center text-tertiaryColor bg-gradient-to-b from-primaryColor to-quaternaryColor",children:`Perfil de ${x.name.split(" ")[0]}`}),e.jsx(xe,{edge:"end",onClick:a.onClose,"aria-label":"close",sx:{position:"absolute",top:"12px",right:"20px"},children:e.jsx(pe,{})}),e.jsx(je,{className:"bg-[#222]",children:e.jsxs("div",{className:"flex flex-col items-center tablet:w-[22rem] mobile:w-[16rem] h-96",children:[e.jsx("span",{className:"text-xl text-center text-tertiaryColor",children:"Histórico de feedback's"}),e.jsx("div",{className:"flex w-full h-full",children:T()})]})})]})})}const Ba=()=>{const{authToken:a}=de();return{getUser:async u=>{if(!a)return null;const d=await v.request({origin:"Web",method:"GET",url:`/users/${u}`,authToken:a});return d.success?d.data:null}}};function Ra({...a}){const{dispatch:t}=ve(),{dispatch:u}=Re(),[d,w]=o.useState(null),[x,S]=o.useState("asc"),[H,F]=o.useState("date"),[h,B]=o.useState(0),[W,J]=o.useState(10),[b,R]=o.useState(!1),[g,T]=o.useState(!1),[P,L]=o.useState(!1),[c,i]=o.useState(!1),y=()=>{R(!0),i(!0)},E=()=>{R(!1),i(!1)},O=(l,f)=>{l&&(S(H===f&&x==="asc"?"desc":"asc"),F(f))},U=(l,f)=>{if(l){const p=a.dataList.find(A=>A.id===f);p&&p.candidacy&&w(p)}},V=(l,f)=>{l&&B(f)},D=l=>{J(parseInt(l.target.value,10)),B(0)},I=da(ke)(({theme:l})=>({[`&.${Ie.head}`]:{color:l.palette.common.black},[`&.${Ie.body}`]:{width:"100%",fontSize:14}})),j=async()=>{T(!0),d&&d.candidacy&&await a.callbackAccept(d.candidacy)?(T(!1),w(null)):T(!1)},M=async()=>{L(!0),u({type:"SHOW_CONFIRMATION",payload:{title:"Confirmar rejeição de candidatura",message:"Deseja rejeitar a candidatura?",onConfirm:async()=>{d&&d.candidacy&&(await a.callbackReject(d.candidacy)?(L(!1),w(null)):L(!1))},onCancel:()=>{L(!1)}}})},$=()=>{a.vacancyQuantity===a.acceptedCandidacies?(a.setFinalize(!0),a.callbackFinalize()):t({type:"SHOW_ALERT",payload:{type:"error",text:"Houve um erro ao finalizar a contratação"}})},z=()=>{var l,f;return e.jsx(e.Fragment,{children:d&&d&&e.jsxs(Le,{className:"bg-[#222] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex flex-row justify-center w-full my-3",children:[e.jsx("span",{className:"text-base font-semibold text-center text-tertiaryColor",children:"1 selecionado"}),e.jsxs("div",{className:"flex flex-row items-center justify-center",children:[e.jsx("span",{className:"mx-2 text-base font-semibold text-center text-tertiaryColor",children:"-"}),e.jsxs("button",{onClick:y,className:"relative transition-colors duration-300 group text-tertiaryColor hover:text-primaryColor disabled:text-tertiaryColor/50",disabled:b||g||P||a.finalize,children:[e.jsx("span",{className:"text-base font-semibold",children:"Ver perfil"}),e.jsx("span",{className:`${b||g||P?"hidden":"absolute left-0 w-full h-[0.20rem] transition-transform duration-300 transform scale-x-0 rounded-full -bottom-1 bg-tertiaryColor group-hover:bg-primaryColor group-hover:scale-x-100"}`})]})]})]}),((l=d.candidacy)==null?void 0:l.status)==="stand by"&&e.jsxs("div",{className:"flex justify-between w-full my-3",children:[e.jsx("button",{className:"w-[46%] flex items-center justify-center h-12 font-bold transition-all duration-500 ease-in-out border-4 shadow-lg mobile:text-base border-errorColor shadow-errorColor/40 text-errorColor hover:text-tertiaryColor rounded-xl hover:bg-errorColor disabled:cursor-not-allowed disabled:bg-errorColor/80 disabled:text-tertiaryColor/80 disabled:border-errorColor/20",onClick:M,disabled:b||g||P||a.finalize,children:P?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(X,{weight:"bold",className:"w-6 h-6 mr-2 animate-spin"}),e.jsx("span",{children:"Recusando..."})]}):e.jsx("span",{children:"Recusar"})}),e.jsx("button",{className:"w-[46%] flex items-center justify-center h-12 font-bold transition-all duration-500 ease-in-out border-4 shadow-lg mobile:text-base border-successColor shadow-successColor/40 text-successColor hover:text-tertiaryColor rounded-xl hover:bg-successColor disabled:cursor-not-allowed disabled:bg-successColor/80 disabled:text-tertiaryColor/80 disabled:border-successColor/20",onClick:j,disabled:b||g||P||a.finalize,children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(X,{weight:"bold",className:"w-6 h-6 mr-2 animate-spin"}),e.jsx("span",{children:"Aceitando..."})]}):e.jsx("span",{children:"Aceitar"})})]}),((f=d.candidacy)==null?void 0:f.status)==="accepted"&&e.jsx("div",{className:"flex items-center justify-center w-full mb-3",children:e.jsx("span",{className:"font-semibold text-successColor",children:`Candidatura aceita em ${ae.formatDateAndTimeToBR(d.candidacy.date)}.`})})]})})},_=()=>e.jsxs(Le,{className:"bg-[#222] flex flex-col justify-start",children:[e.jsx("div",{className:"flex flex-row justify-start w-full mt-3",children:e.jsx("span",{className:"text-base font-semibold text-center text-primaryColor",children:`Nº de contratações: ${a.acceptedCandidacies}/${a.vacancyQuantity}`})}),e.jsx("div",{className:"flex items-center justify-center w-full my-3",children:e.jsx("button",{className:"w-[65%] flex items-center justify-center h-12 font-bold transition-all duration-500 ease-in-out border-4 shadow-lg mobile:text-base border-primaryColor shadow-primaryColor/40 text-primaryColor hover:text-tertiaryColor rounded-xl hover:bg-primaryColor disabled:cursor-not-allowed disabled:bg-primaryColor/50 disabled:text-tertiaryColor/80 disabled:border-primaryColor/10",onClick:$,disabled:b||g||P||a.vacancyQuantity!==a.acceptedCandidacies||a.finalize,children:a.finalize?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(X,{weight:"bold",className:"w-6 h-6 mr-2 animate-spin"}),e.jsx("span",{children:"Finalizando..."})]}):e.jsx("span",{children:"Finalizar contratação"})})})]}),Q=[{id:" ",numeric:!1,disablePadding:!0,label:" "},{id:"name",numeric:!1,disablePadding:!1,label:"Nome"},{id:"city",numeric:!1,disablePadding:!1,label:"Cidade"},{id:"rating",numeric:!0,disablePadding:!1,label:"Avaliação"},{id:"date",numeric:!1,disablePadding:!1,label:"Data"},{id:"status",numeric:!1,disablePadding:!1,label:"Status"}],K=(l,f,p)=>{const A=C=>Z=>{l(Z,C)};return e.jsx(pa,{children:e.jsx(Pe,{children:Q.map(C=>e.jsx(ke,{align:"left",padding:C.disablePadding?"none":"normal",sortDirection:p===C.id?f:!1,sx:{fontWeight:600},children:e.jsxs(ya,{active:p===C.id,direction:p===C.id?f:"asc",onClick:A(C.id),children:[C.label,p===C.id?e.jsx(ha,{component:"span",sx:ba,children:f==="desc"?"sorted descending":"sorted ascending"}):null]})},C.id))})})},G=l=>e.jsx("img",{src:l,alt:"Imagem de perfil do Freelancer que se candidatou",className:"w-16 h-16 rounded-lg"}),te=(l,f)=>e.jsxs("div",{className:"flex flex-row items-center justify-start",children:[f!=="Não possuo"&&e.jsx("img",{title:"O freelancer é portador de deficiência",src:Be.disabledPeople.source,alt:Be.disabledPeople.alternativeText,className:"w-8 h-8 mr-2 rounded-full"}),e.jsx("span",{children:l})]}),ne=l=>e.jsxs("div",{className:"flex flex-row items-center justify-start",children:[e.jsx(ye,{readOnly:!0,value:l}),l===0&&e.jsx("span",{className:"text-sm",children:"(Nenhuma avaliação)"})]}),N=()=>{w(null),S("asc"),F("date"),B(0),J(10),R(!1),T(!1),L(!1),i(!1),a.setFinalize(!1)};return o.useEffect(()=>{N()},[a.open]),e.jsxs(e.Fragment,{children:[e.jsxs(fe,{onClose:a.onClose,open:a.open,PaperProps:{sx:{margin:"0",width:"95%"}},disableScrollLock:!0,children:[e.jsx(me,{className:"w-full text-xl font-bold text-center text-tertiaryColor bg-gradient-to-b from-primaryColor to-quaternaryColor",children:"Candidaturas"}),e.jsx(xe,{edge:"end",onClick:a.onClose,"aria-label":"close",sx:{position:"absolute",top:"12px",right:"20px"},disabled:b||g||P,children:e.jsx(pe,{})}),z(),e.jsx(ua,{component:"div",className:"flex",children:e.jsxs(fa,{sx:{minWidth:700},"aria-label":"customized table",children:[K(O,x,H),e.jsx(ma,{children:a.dataList.map(l=>{var C,Z;const f=(d==null?void 0:d.id)===l.id;let p="#fff",A="";if((C=l.candidacy)!=null&&C.status)switch((Z=l.candidacy)==null?void 0:Z.status){case"stand by":p="#FF9E00",A="Aguardando";break;case"accepted":p="#03C03C",A="Aceita";break;case"rejected":p="#EC2300",A="Recusada";break;default:p="#fff",A=""}return e.jsxs(Pe,{hover:!0,onClick:ee=>U(ee,l.id),role:"checkbox","aria-checked":f,tabIndex:-1,selected:f,sx:{cursor:"pointer","&.Mui-selected":{backgroundColor:"rgba(255, 158, 0, 0.4)"},"&:hover":{backgroundColor:"rgba(255, 158, 0, 0.2)"},"&.Mui-selected:hover":{backgroundColor:"rgba(255, 158, 0, 0.5)"}},children:[e.jsx(I,{children:G(l.image)}),e.jsx(I,{align:"left",children:te(l.name,l.deficiency)}),e.jsx(I,{align:"left",children:l.city}),e.jsx(I,{align:"left",children:ne(l.rating)}),e.jsx(I,{align:"left",children:l.date}),e.jsx(I,{align:"left",sx:{color:p,fontWeight:"bold"},children:A})]},l.id)})})]})}),e.jsx(xa,{rowsPerPageOptions:[5,10,25],component:"div",count:a.dataList.length,rowsPerPage:W,page:h,onPageChange:V,onRowsPerPageChange:D,labelRowsPerPage:"Linhas por página",labelDisplayedRows:({from:l,to:f,count:p})=>`Exibindo ${l}-${f} de ${p+(p>1?" linhas":" linha")}`}),_()]}),b&&d&&e.jsx(La,{providerId:d.id,open:c,onClose:E})]})}class ge{static camouflageStr(t,u){if(!t)throw new Error("str is required");if(!u)throw new Error("asterisksQuantity is required");let d="",w=0;if(t.length<u)throw new Error("str can't be smaller than asterisksQuantity");for(let x=0;x<t.length;x++)(t[x]>="a"&&t[x]<="z"||t[x]>="A"&&t[x]<="Z"||t[x]>="0"&&t[x]<="9")&&w<u?(d+="*",w++):d+=t[x];return d}}Te(ge,"isLetter",t=>{if(!t)throw new Error("value is required");const u=t.charAt(t.length-1);return/[a-zA-Z]/.test(u)});function Aa({...a}){const{authToken:t}=de(),{dispatch:u}=ve(),[d,w]=o.useState(1),[x,S]=o.useState(null),[H,F]=o.useState([]),[h,B]=o.useState(null),[W,J]=o.useState(null),[b,R]=o.useState(null),[g,T]=o.useState(!1),[P,L]=o.useState(!1),[c,i]=o.useState(!1),[y,E]=o.useState(!1),[O,U]=o.useState(!1),[V,D]=o.useState(!0),[I,j]=o.useState(!1),[M,$]=o.useState(!0),z=async l=>{if(l.method==="creditCard"&&i(!0),U(!0),t&&a.jobs){const f=a.jobs[0].vacancyId;let p;l.method==="creditCard"&&h&&(p=h.id);const A={method:l.method,vacancyId:f,contractorCreditCardId:p},C=await v.request({origin:"Web",method:"POST",url:"/vacancies/jobs/payments",data:A,authToken:t});if(C.success&&C.data){const Z=C.data;if(l.method==="pix"){const ee=Z;J(ee.pixQrCode),R(ee.pixQrCodeImage)}await _(f)}else l.method==="creditCard"&&i(!1),U(!1),a.callbackError()}},_=async l=>{let f=null;const p=()=>{f&&(clearTimeout(f),f=null)};if(t){let A="pending";for(;A==="pending";){const C=await v.request({origin:"Web",method:"GET",url:`/vacancies/${l}/jobs/payments`,authToken:t});console.log({...C}),C.success&&C.data&&(A=C.data[0].status,A==="paid"?(p(),x==="creditCard"&&i(!1),i(!1),U(!1),E(!0),setTimeout(()=>{a.callbackSuccess()},6e3)):await new Promise(ee=>{f=setTimeout(ee,5e3)}))}}else p(),x==="creditCard"&&i(!1),U(!1),a.callbackError()},Q=async()=>{a.jobs&&(d===1&&x==="pix"?(w(d+1),await z({method:x})):d===2&&x==="creditCard"&&h?await z({method:x,contractorCreditCardId:h.id}):w(d+1))},K=()=>{d===1?S(null):w(d-1)},G=()=>{switch(x){case"pix":return"Pix";case"creditCard":return h?`Cartão de crédito - Final: ${h.cardNumber.slice(-4)}`:""}},te=()=>e.jsxs("div",{className:"flex flex-col w-full h-full",children:[e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"font-bold text-tertiaryColor",children:"Serviço:"}),e.jsx("span",{className:"text-tertiaryColor",children:" "+a.jobs[0].title})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"font-bold text-tertiaryColor",children:"Valor total:"}),e.jsx("span",{className:"text-tertiaryColor",children:" "+be.getJobValueByProfile("contractor",a.jobs[0].value,a.jobs.length)+" (taxa da plataforma inclusa)"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"font-bold text-tertiaryColor",children:"Método de pagamento:"}),e.jsx("span",{className:"text-tertiaryColor",children:" "+G()})]})]}),ne=()=>{if(y)return e.jsxs("div",{className:"flex flex-col justify-center w-full h-full",children:[e.jsx("span",{className:"w-full text-xl font-semibold text-center text-successColor",children:"Pagamento concluído com sucesso"}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx(Ca,{className:"w-80 h-80",animationData:ka,initialSegment:[0,120],loop:!1})})]});if(x)switch(x){case"creditCard":switch(d){case 1:return e.jsxs("div",{className:"flex flex-col w-full h-full px-2",children:[e.jsx("span",{className:"w-full mb-10 text-xl text-center text-tertiaryColor",children:"Escolha o cartão de crédito para processar o pagamento"}),M?e.jsx("div",{className:"flex items-start justify-center w-full h-full pt-10",children:e.jsx(X,{weight:"bold",className:"w-12 h-12 animate-spin text-tertiaryColor"})}):H&&H.length>0?H.map((l,f)=>e.jsxs("button",{onClick:()=>{B(l),Q()},className:"flex flex-col w-56 px-4 py-6 transition-transform duration-500 scale-100 border-2 rounded-md border-tertiaryColor hover:border-primaryColor hover:scale-110",children:[e.jsx("div",{className:"w-full h-1 mb-2 rounded-md bg-tertiaryColor"}),e.jsx("span",{className:"text-tertiaryColor text-start",children:ge.camouflageStr(l.cardNumber,l.cardNumber.length-7)}),e.jsx("span",{className:"text-tertiaryColor text-start",children:ge.camouflageStr(l.cvv,l.cvv.length-1)})]},f)):e.jsx("div",{className:"flex items-center justify-center w-full h-10",children:e.jsx("span",{className:"text-tertiaryColor text-start",children:"Nenhum cartão de crédito cadastrado"})})]});case 2:return e.jsx(e.Fragment,{children:te()});default:return null}case"pix":switch(d){case 1:return e.jsx(e.Fragment,{children:te()});case 2:return e.jsxs("div",{className:"flex flex-col items-center w-full h-full px-2 overflow-hidden justify center",children:[e.jsx("span",{className:"w-full mb-1 text-xl text-center text-tertiaryColor whitespace-nowrap",children:"Código Pix:"}),W&&b?e.jsxs("div",{className:"flex flex-col items-center justify-center w-full overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-center w-64 h-64 p-1 bg-[#222]",children:e.jsx("img",{src:b,alt:"Pix QR Code",className:"w-full h-full max-w-full max-h-full"})}),e.jsx("div",{className:"flex flex-col items-center justify-center w-full mt-1 text-tertiaryColor",children:e.jsx("span",{className:"w-full overflow-hidden text-sm text-ellipsis whitespace-nowrap",children:W})}),e.jsx("div",{className:"flex flex-col items-center justify-center w-full mt-1",children:e.jsx(va,{text:W,onCopy:()=>{u({type:"SHOW_ALERT",payload:{type:"success",text:"QRCode copiado com sucesso"}})},children:e.jsx("button",{className:"font-semibold text-tertiaryColor hover:text-primaryColor",children:"Copiar código"})})})]}):e.jsx("div",{className:"flex items-start justify-center w-full h-full pt-10",children:e.jsx(X,{weight:"bold",className:"w-12 h-12 animate-spin text-tertiaryColor"})})]});default:return null}default:throw new Error("Invalid payment method")}else return e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("span",{className:"text-xl text-center text-tertiaryColor",children:"Escolha a forma de pagamento"}),e.jsx("div",{className:"flex flex-col items-center justify-center",children:e.jsx("button",{onClick:()=>S("pix"),className:"flex items-center justify-center h-12 mt-4 font-bold transition-all duration-500 ease-in-out border-4 shadow-lg mobile:text-base border-successColor shadow-successColor/40 text-successColor hover:text-tertiaryColor rounded-xl hover:bg-successColor mobile:w-full disabled:cursor-not-allowed disabled:bg-successColor/80 disabled:text-tertiaryColor/80 disabled:border-successColor/20",children:"Pix"})})]})},N=()=>{w(1),S(null),F([]),B(null),J(null),R(null),T(!1),L(!1),i(!1),E(!1),U(!1),D(!0),j(!1),$(!0)};return o.useEffect(()=>{N(),a.open},[a.open]),o.useEffect(()=>{if(x)switch(x){case"creditCard":switch(d){case 1:D(!1),j(!h);break;case 2:D(!0),j(!1);break}break;case"pix":switch(d){case 1:D(!0),j(!1);break;case 2:D(!1);break}break}},[x,d,h,W]),e.jsx(e.Fragment,{children:a.jobs&&e.jsxs(fe,{onClose:a.onClose,open:a.open,maxWidth:"xl",children:[e.jsx(me,{className:"w-full text-xl font-bold text-center text-tertiaryColor bg-gradient-to-b from-primaryColor to-quaternaryColor",children:"Pagamento"}),e.jsx(xe,{edge:"end",onClick:a.onClose,"aria-label":"close",sx:{position:"absolute",top:"12px",right:"20px"},disabled:O,children:e.jsx(pe,{})}),e.jsx(je,{className:"bg-[#222]",children:e.jsxs("div",{className:"flex flex-col items-center justify-around tablet:w-[22rem] mobile:w-[16rem] h-96",children:[e.jsx("div",{className:"flex w-full h-full",children:ne()}),!y&&x&&e.jsxs("div",{className:"flex items-start justify-between w-full h-20 mx-auto mobile:pb-4",children:[e.jsxs("button",{type:"button",className:"flex flex-col items-center w-16",onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onClick:K,disabled:c,children:[e.jsx(ga,{size:42,className:`transition-transform duration-500 ${g?"scale-110 text-primaryColor":"scale-100 text-tertiaryColor"}`}),e.jsx("span",{className:`mt-3 transition-transform duration-1000 ${g?"text-primaryColor":"text-tertiaryColor"}`,children:"Voltar"})]}),V&&e.jsxs("button",{type:"button",className:"flex flex-col items-center",onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),onClick:Q,disabled:I||O,children:[e.jsx(ja,{size:42,className:`transition-transform duration-500 
                                                    ${I||O?"scale-110 text-tertiaryColor/50":`${P?"scale-110 text-primaryColor":"scale-100 text-tertiaryColor"}`}
                                                `}),e.jsx("span",{className:`mt-3 transition-transform duration-1000
                                                    ${I||O?"text-tertiaryColor/50":`${P?"text-primaryColor":"text-tertiaryColor"}`}
                                                `,children:x==="creditCard"?d===2?"Finalizar":"Próximo":d===1?"Finalizar":"Próximo"})]})]}),c&&e.jsx(Ta,{})]})})]})})}function qa({...a}){const{authToken:t}=de(),{dispatch:u}=ve(),{dispatch:d}=Re(),{getUser:w}=Ba(),x=o.useRef(a.vacancy),S=o.useRef(null),H=o.useRef(!1),F=o.useRef(!1),[h,B]=o.useState(null),[W,J]=o.useState(""),[b,R]=o.useState(null),[g,T]=o.useState([]),[P,L]=o.useState(""),[c,i]=o.useState([]),[y,E]=o.useState([]),[O,U]=o.useState(!1),[V,D]=o.useState(!1),[I,j]=o.useState(!1),[M,$]=o.useState(!1),[z,_]=o.useState(!1),[Q,K]=o.useState(!1),[G,te]=o.useState(!1),[ne,N]=o.useState(!0),[l,f]=o.useState(!0),[p,A]=o.useState(null),C=async s=>{let r=null;if(t){const n=await v.request({origin:"Web",method:"GET",url:`/providers/${s}`,authToken:t});n.success&&n.data&&(r=n.data)}return r},Z=async()=>{if(H.current=!0,t){const s=await v.request({origin:"Web",method:"GET",url:`/contractors/${a.vacancy.contractorId}`,authToken:t});if(s.success&&s.data){const r=s.data;B(r);const n=new Uint8Array(r.profileImage.data).buffer,m=new Blob([n],{type:"image/jpeg"}),k=URL.createObjectURL(m);k&&J(k)}else B(null)}},ee=async()=>{if(t&&a.provider){const s=await v.request({origin:"Web",method:"GET",url:`/providers/${a.provider.id}/vacancies/${a.vacancy.id}/candidacies`,authToken:t});if(s.success&&s.data){const r=s.data;R(r)}else R(null);N(!1),f(!1)}},Ae=async()=>{if(t){const s=await v.request({origin:"Web",method:"GET",url:"/vacancies/candidacies",params:{vacancyId:a.vacancy.id},authToken:t});if(s.success&&s.data){const r=s.data;r.length>0?(T(r),L(r.length+(r.length===1?" candidatura":" candidaturas"))):(T([]),L("0 candidaturas"))}else T([]),L("0 candidaturas")}},Ee=async()=>{if(t){const s=[];if(g&&g.length>0)for(const r of g){const n=await C(r.providerId);if(n){const m=new Uint8Array(n.profileImage.data).buffer,k=new Blob([m],{type:"image/jpeg"}),q=URL.createObjectURL(k),se=await w(n.userId);se&&s.push({id:n.id,image:q,name:se.name,city:n.city,phone:n.phoneMessage,rating:n.feedbackStars,deficiency:n.deficiency,date:ae.formatDateAndTimeToBR(r.date),candidacy:r})}}i(s)}},he=async()=>{if(F.current=!0,t&&S.current){const s=await v.request({origin:"Web",method:"GET",url:"/vacancies/jobs",params:{vacancyId:a.vacancy.id},authToken:t});if(s.success&&s.data){const r=s.data;if(r&&r.length>0){const n=new Uint8Array(S.current.profileImage.data).buffer,m=new Blob([n],{type:"image/jpeg"}),k=URL.createObjectURL(m),q=await w(S.current.userId);if(q){const se=[];for(const le of r){const Y=await C(le.providerId);if(Y){const re=new Uint8Array(Y.profileImage.data).buffer,oe=new Blob([re],{type:"image/jpeg"}),ie=URL.createObjectURL(oe),ce=await w(Y.userId);ce&&se.push({id:le.id,title:a.vacancy.assignment,value:a.vacancy.jobValue,status:le.status,date:a.vacancy.jobDate,time:a.vacancy.jobTime,contractor:{id:S.current.id,image:k,name:q.name,phoneNumber:q.phoneNumber,feedbackStars:S.current.feedbackStars},provider:{id:Y.id,image:ie,name:ce.name,phoneNumber:ce.phoneNumber,feedbackStars:Y.feedbackStars,deficiency:Y.deficiency},vacancyId:a.vacancy.id})}}E(se)}}else E([])}else E([]);N(!1)}},ue=async(s,r,n=!1)=>{if(n){i(re=>re.filter(oe=>oe.id!==s));return}if(!r)return;const m=await C(s);if(!m)return;const k=await w(m.userId);if(!k)return;const q=new Uint8Array(m.profileImage.data).buffer,se=new Blob([q],{type:"image/jpeg"}),le=URL.createObjectURL(se),Y={id:m.id,image:le,name:k.name,city:m.city,phone:m.phoneMessage,rating:m.feedbackStars,deficiency:m.deficiency,date:ae.formatDateAndTimeToBR(r.date),candidacy:r};i(re=>{const oe=re.findIndex(ie=>ie.id===s);return oe!==-1?re.map((ie,ce)=>ce===oe?{...ie,...Y}:ie):[...re,Y]})},De=async()=>{var s;D(!0),(s=a.setDisabledApplyCandidacyButton)==null||s.call(a,!0),setTimeout(async()=>{var r;await $e(),(r=a.setDisabledApplyCandidacyButton)==null||r.call(a,!1),D(!1),j(!1)},3e3)},ze=()=>{j(!0),d({type:"SHOW_CONFIRMATION",payload:{title:"Confirmar cancelamento de candidatura",message:"Deseja cancelar a candidatura?",onConfirm:()=>{setTimeout(async()=>{var s;await qe(),j(!1),(s=a.setDisabledApplyCandidacyButton)==null||s.call(a,!1),D(!1)},3e3)},onCancel:()=>{var s;j(!1),(s=a.setDisabledApplyCandidacyButton)==null||s.call(a,!1),D(!1)}}})},He=()=>{U(!0),d({type:"SHOW_CONFIRMATION",payload:{title:"Confirmar exclusão de vaga",message:"Deseja excluir a vaga permanentemente?",onConfirm:()=>{var s;(s=a.onRemoved)==null||s.call(a),U(!1)},onCancel:()=>{U(!1)}}})},Fe=async s=>{var r;if(t){const n=await v.request({origin:"Web",method:"PATCH",url:`/candidacies/${s.id}/accept`,authToken:t});if(n.success&&n.data)return await((r=a.onAcceptCandidacy)==null?void 0:r.call(a)),u({type:"SHOW_ALERT",payload:{type:"success",text:"Candidatura aceita com sucesso"}}),!0;{let m="";return n.statusCode!==404?n.statusCode===403?m="O limite candidaturas aceitas para essa vaga já foi atingido":m="Houve um erro inesperado ao aceitar a candidatura":m="Houve um erro ao aceitar a candidatura",u({type:"SHOW_ALERT",payload:{type:"error",text:m}}),!1}}return!1},Oe=async s=>{var r;if(t){const n=await v.request({origin:"Web",method:"PATCH",url:`/candidacies/${s.id}/reject`,authToken:t});if(n.success&&n.data)return await((r=a.onRejectCandidacy)==null?void 0:r.call(a)),u({type:"SHOW_ALERT",payload:{type:"success",text:"Candidatura recusada com sucesso"}}),!0;{let m="";return n.statusCode!==404?m="Houve um erro inesperado ao recusar a candidatura":m="Houve um erro ao recusar a candidatura",u({type:"SHOW_ALERT",payload:{type:"error",text:m}}),!1}}return!1},Ue=async()=>{if(t&&y&&y.length>0){const s=await v.request({origin:"Web",method:"GET",url:`/vacancies/${a.vacancy.id}/jobs/payments`,authToken:t});s.success&&s.data&&s.data[0].status==="paid"?await we():Ge()}},we=async()=>{var s;if(t&&y&&y.length>0){const r=await v.request({origin:"Web",method:"PATCH",url:`vacancies/${a.vacancy.id}/jobs/schedule`,authToken:t});if(r.success&&r.data)u({type:"SHOW_ALERT",payload:{type:"success",text:"A contratação foi finalizada"}}),Se(),Ne(),await((s=a.onFinalizeHiring)==null?void 0:s.call(a));else{let n="";r.statusCode!==404?n="Houve um erro inesperado ao finalizar a contratação":n="Houve um erro ao finalizar a contratação",u({type:"SHOW_ALERT",payload:{type:"error",text:n}})}}},$e=async()=>{var s;if(t&&a.provider){const r={vacancyId:a.vacancy.id,providerId:a.provider.id,date:new Date,status:"stand by"},n=await v.request({origin:"Web",method:"POST",url:"/candidacies",data:r,authToken:t});if(n.success&&n.data)await((s=a.onApplyCandidacy)==null?void 0:s.call(a)),u({type:"SHOW_ALERT",payload:{type:"success",text:"Candidatura realizada com sucesso"}});else{let m="";n.statusCode!==404?n.statusCode===409?m="A vaga na qual você está tentando se candidatar não está mais disponível":n.statusCode===403?m="Não há mais candidaturas disponíveis para essa vaga":n.statusCode===410?m="Parece que você já possui um serviço para essa data":m="Houve um erro inesperado ao se candidatar":m="Houve um erro ao se candidatar",u({type:"SHOW_ALERT",payload:{type:"error",text:m}})}}},qe=async()=>{var s;if(t&&a.provider&&b){const r=await v.request({origin:"Web",method:"DELETE",url:`/candidacies/${b.id}`,authToken:t});r.success&&r.data?(await((s=a.onCancelCandidacy)==null?void 0:s.call(a)),u({type:"SHOW_ALERT",payload:{type:"success",text:"Candidatura cancelada com sucesso"}})):u({type:"SHOW_ALERT",payload:{type:"error",text:"Houve um erro ao cancelar a candidatura"}})}},We=()=>{te(!0)},Je=()=>{te(!1)},Me=()=>{_(!0)},Ne=()=>{_(!1)},Ge=()=>{$(!0),K(!0)},Se=()=>{$(!1),K(!1)},Ve=()=>{let s;switch(a.vacancy.status){case"open":s="Aberta";break;case"in hiring":s="Em contratação";break;case"closed":s="Fechada";break;case"removed":s="Removida";break;default:console.error("Unknown vacancy status"),s="";break}return s},_e=()=>{let s="Vaga criada em: "+ae.formatDateAndTimeToBR(a.vacancy.createdAt);return a.profileType==="provider"&&b&&(s="Candidatura realizada em: "+ae.formatDateAndTimeToBR(b.date),b.status==="accepted"?s+=" (aceita pelo contratante)":b.status==="rejected"?s+=" (rejeitada pelo contratante)":s+=" (aguardando resposta)"),s},Qe=()=>{const s=Sa("https://freela-servicos.duckdns.org");A(s),s.on("contractorAcceptedCandidacy",async r=>{if(a.vacancy.id===r.vacancy.id){const n={id:r.id,status:r.status,date:r.date,vacancyId:r.vacancy.id,providerId:r.providerId};a.profileType==="contractor"?(N(!0),T(m=>{const k=m.findIndex(q=>q.id===n.id);if(k!==-1){const q=[...m];return q[k]={...q[k],...n},q}return[n,...m]}),await Promise.all([ue(n.providerId,n),he()]),setTimeout(()=>{N(!1)},1500)):a.profileType==="provider"&&a.provider.id===r.providerId&&(N(!0),f(!0),R(n),setTimeout(()=>{N(!1),f(!1)},1500))}}),s.on("contractorRejectedCandidacy",async r=>{if(a.vacancy.id===r.vacancy.id){const n={id:r.id,status:r.status,date:r.date,vacancyId:r.vacancy.id,providerId:r.providerId};a.profileType==="contractor"?(N(!0),T(m=>m.filter(k=>k.id!==n.id)),await Promise.all([ue(n.providerId,n,!0),he()]),setTimeout(()=>{N(!1)},1500)):a.profileType==="provider"&&a.provider.id===r.providerId&&(N(!0),f(!0),R(n),setTimeout(()=>{N(!1),f(!1)},1500))}}),s.on("providerCreatedCandidacy",async r=>{a.vacancy.id===r.vacancyId&&(a.profileType==="contractor"?(N(!0),T(n=>n.some(k=>k.id===r.id)?n:[r,...n]),await ue(r.providerId,r),setTimeout(()=>{N(!1)},1500)):a.profileType==="provider"&&a.provider.id===r.providerId&&(N(!0),f(!0),R(r),setTimeout(()=>{N(!1),f(!1)},1500)))}),s.on("providerDeletedCandidacy",async({candidacyId:r,vacancy:n})=>{if(a.vacancy.id===n.id)if(a.profileType==="contractor"){N(!0),T(k=>k.filter(q=>q.id!==r));const m=g.find(k=>k.id===r);m&&await ue(m.providerId,void 0,!0),setTimeout(()=>{N(!1)},1500)}else a.profileType==="provider"&&a.provider.id===r&&(f(!0),N(!0),b&&b.id===r&&R(null),setTimeout(()=>{f(!1),N(!1)},1500))})};return o.useEffect(()=>{x.current=a.vacancy},[a.vacancy]),o.useEffect(()=>{if(g&&g.length>0){Ee();let s=!1;const r=()=>{L(s?`${g.length} ${g.length===1?"candidatura":"candidaturas"}`:"Toque para ver!"),s=!s},n=setInterval(r,4e3);return r(),()=>clearInterval(n)}},[g]),o.useEffect(()=>{F.current||h&&(S.current=h,a.profileType==="contractor"&&he())},[h]),o.useEffect(()=>{if(!H.current)return(async()=>{a.profileType==="contractor"?await Promise.all([Z(),Ae()]):a.profileType==="provider"&&await Promise.all([Z(),ee()]),Qe()})(),()=>{p&&p.connected&&(p.off("contractorAcceptedCandidacy"),p.off("contractorRejectedCandidacy"),p.off("providerCreatedCandidacy"),p.off("providerDeletedCandidacy"),p.disconnect())}},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"relative flex w-full border-2 rounded-lg tablet:p-6 mobile:p-4 border-primaryColor",children:ne?e.jsx("div",{className:"flex items-center justify-center w-full h-48",children:e.jsx(X,{weight:"bold",className:"w-10 h-10 animate-spin text-primaryColor"})}):e.jsxs("div",{className:"flex flex-col w-full",children:[a.profileType==="contractor"&&e.jsx("button",{title:"Remover vaga",className:"absolute flex items-center justify-center transition-all duration-300 ease-in-out rounded-full tablet:right-5 tablet:top-5 mobile:top-3 mobile:right-3 text-tertiaryColor hover:scale-110 hover:text-errorColor disabled:text-tertiaryColor/50 disabled:scale-100",onClick:He,disabled:O,children:e.jsx(wa,{size:26,weight:"bold"})}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Pa,{assignment:`${a.vacancy.assignment}`}),e.jsx("span",{className:"ml-2 text-xl font-semibold text-center text-primaryColor",children:a.vacancy.assignment.toUpperCase()})]}),e.jsx("div",{className:"flex flex-row justify-between w-full mt-4",children:e.jsx("div",{className:"flex flex-col justify-start w-full",children:e.jsxs("div",{className:"flex flex-row items-center justify-start w-full h-24 border-2 rounded-e-full bg-secondaryColor ",children:[e.jsx("div",{className:"flex items-center w-[6.5rem] h-24 bg-primaryColor rounded-s-3xl",children:h&&W&&W!==""?e.jsx("img",{src:W,alt:`Imagem de perfil de ${h.corporateReason}`,className:"w-24 h-24 rounded-s-3xl "}):e.jsx(Na,{className:"mx-auto text-tertiaryColor",size:70})}),e.jsxs("div",{className:"flex flex-col items-start justify-start h-full ml-3",children:[e.jsx("span",{className:"w-full font-semibold text-tertiaryColor",children:a.vacancy.establishment}),h&&e.jsxs("div",{className:"flex items-center justify-start w-full mt-2",children:[e.jsx(ye,{readOnly:!0,value:h.feedbackStars,size:"small",emptyIcon:e.jsx(Ce,{className:"text-quinaryColor",size:18})}),h.feedbackStars===0&&e.jsx("span",{className:"text-sm",children:"(Nenhuma avaliação)"})]}),e.jsx("div",{children:e.jsx("button",{className:`text-xs font-semibold ${G?"text-primaryColor":"text-tertiaryColor"} hover:text-primaryColor`,onClick:We,children:"Ver avaliações"})})]})]})})}),e.jsx("div",{className:"mt-3 text-tertiaryColor",children:a.vacancy.description}),e.jsxs("div",{className:"mt-4 text-tertiaryColor",children:[e.jsx("span",{className:"font-semibold",children:"Localização:"}),h&&" "+h.city+" - "+h.uf]}),e.jsxs("div",{className:"mt-1 text-tertiaryColor",children:[e.jsx("span",{className:"font-semibold",children:"Data do serviço:"})," "+ae.formatDateAndTimeToBR(a.vacancy.jobDate)]}),e.jsxs("div",{className:"mt-1 text-tertiaryColor",children:[e.jsx("span",{className:"font-semibold",children:"Tempo de serviço:"})," "+a.vacancy.jobTime]}),e.jsxs("div",{className:"flex flex-row justify-between mt-1 text-tertiaryColor",children:[e.jsxs("div",{className:"",children:[e.jsx("span",{className:"font-semibold",children:a.profileType==="contractor"?"Valor a ser pago:":"Valor a receber:"})," "+(a.profileType==="contractor"?be.getJobValueByProfile(a.profileType,a.vacancy.jobValue,a.vacancy.quantity):be.getJobValueByProfile(a.profileType,a.vacancy.jobValue,void 0,"R$1,00"))]}),e.jsx("div",{children:a.profileType==="contractor"&&e.jsx("button",{type:"button",disabled:!g||g.length===0||O,className:"font-semibold text-end text-primaryColor disabled:text-tertiaryColor/50",onClick:Me,children:g&&P&&P.length>0&&P})})]}),e.jsxs("div",{className:"flex justify-between mt-1 text-tertiaryColor",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Status:"}),e.jsx("span",{className:`text-start font-semibold 
                                            ${a.vacancy.status==="open"?"text-successColor":a.vacancy.status==="in hiring"?"text-quaternaryColor":a.vacancy.status==="closed"?"text-[#a6a6a6]":a.vacancy.status==="removed"?"text-errorColor":"text-tertiaryColor"}
                                        `,children:" "+Ve()})]}),e.jsx("span",{className:`text-sm italic text-end ${b?b.status==="accepted"?"text-successColor":b.status==="rejected"?"text-errorColor":"text-primaryColor":"text-tertiaryColor"}`,children:_e()})]}),!l&&a.profileType==="provider"&&(b?b.status==="stand by"&&e.jsx("button",{onClick:ze,className:"flex items-center justify-center h-12 mt-4 font-bold transition-all duration-300 ease-in-out border-4 shadow-lg mobile:text-base shadow-errorColor/40 border-errorColor text-errorColor rounded-xl hover:bg-errorColor mobile:w-full hover:text-tertiaryColor disabled:cursor-not-allowed disabled:bg-errorColor/80 disabled:text-tertiaryColor/80 disabled:border-errorColor/20",disabled:I,children:I?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(X,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Cancelando..."})]}):e.jsx("span",{children:"Cancelar candidatura"})}):e.jsx("button",{onClick:De,className:"flex items-center justify-center h-12 mt-4 font-bold transition-all duration-500 ease-in-out border-4 shadow-lg mobile:text-base border-successColor shadow-successColor/40 text-successColor hover:text-tertiaryColor rounded-xl hover:bg-successColor mobile:w-full disabled:cursor-not-allowed disabled:bg-successColor/80 disabled:text-tertiaryColor/80 disabled:border-successColor/20",disabled:V||a.disabledApplyCandidacyButton,children:V?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(X,{weight:"bold",className:"w-6 h-6 mr-3 animate-spin"}),e.jsx("span",{children:"Candidatando..."})]}):e.jsx("span",{children:"Candidatar-se"})}))]})})}),c&&c.length>0&&e.jsx(Ra,{dataList:c,open:z,onClose:Ne,vacancyQuantity:a.vacancy.quantity,acceptedCandidacies:y.length,callbackAccept:Fe,callbackReject:Oe,finalize:M,setFinalize:$,callbackFinalize:Ue}),h&&e.jsx(Ia,{contractorId:h.id,open:G,onClose:Je}),a.profileType==="contractor"&&y&&y.length>0&&e.jsx(Aa,{jobs:y,open:Q,onClose:Se,callbackSuccess:we,callbackError:()=>{u({type:"SHOW_ALERT",payload:{type:"error",text:"Houve um erro ao processar o pagamento"}})}})]})}export{Ia as C,Pa as J,La as P,qa as V,Ba as u};
